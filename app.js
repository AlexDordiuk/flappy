!function(e){function t(t){for(var i,a,o=t[0],c=t[1],l=t[2],u=0,d=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(h&&h(t);d.length;)d.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(i=!1)}i&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},r={0:0},n=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var h=c;n.push([1,1]),s()}([,function(e,t,s){"use strict";s.r(t);var i=s(0),r=s.n(i);const n={width:800,height:600,initialPosition:{width:80,height:300}},a=[400,300],o=[{scene:"GameScene",text:"Play"},{scene:"BestScoreScene",text:"Best Score"},{scene:"",text:"Exit"}],c=[{scene:"GameScene",text:"Resume"},{scene:"MenuScene",text:"To menu"}],l=[150,250];class h extends Phaser.Scene{constructor(){super("PreloadScene")}preload(){this.load.image("sky","assets/sky.png"),this.load.spritesheet("bird","assets/birdSprite.png",{frameWidth:16,frameHeight:16}),this.load.image("wall","assets/wall.png"),this.load.image("pause","assets/pause.png")}create(){this.scene.start("MenuScene")}}const u={fontSize:48,color:"#fff"},d={color:"red",cursor:"pointer"},p={fontSize:36,color:"#fff"};class g extends r.a.Scene{constructor(e,t){super(e),this.config=t}preload(){this.load.image("sky","assets/sky.png")}create(){this.add.image(0,0,"sky").setOrigin(0)}createMenu(e,t){let s=0;e.forEach((e=>{const i=[a[0],a[1]+s];e.textInteractive=this.add.text(...i,e.text,u).setOrigin(.5,2),s+=70,t(e)}))}textPointerOver(e,t){e.on("pointerover",(()=>e.setStyle(t)))}textPointerOut(e,t){e.on("pointerout",(()=>e.setStyle(t)))}backToMenu(e){e.on("pointerup",(()=>this.scene.start("MenuScene")))}}const f=[h,class extends g{constructor(e){super("MenuScene",e)}create(){super.create(),super.createMenu(o,this.setupMenuEvents.bind(this))}setupMenuEvents(e){const t=e.textInteractive.setInteractive();super.textPointerOver(t,d),super.textPointerOut(t,u),t.on("pointerup",(()=>{e.scene.length?this.scene.start(e.scene):this.game.destroy(!0)}))}},class extends g{constructor(e){super("GameScene",e),this.bird=null,this.walls=null,this.wallHorizontalDistance=350,this.score=0,this.scoreText=""}create(){super.create(),this.createBird(),this.createBirdAnimation(),this.createWalls(),this.createColliders(),this.createScore(),this.handleInputs(),this.createPause(),this.resumeListener()}update(){(this.bird.getBounds().bottom>=this.config.height||this.bird.getBounds().top<=0)&&this.restartGame(),this.reuseWalls()}createBird(){this.bird=this.physics.add.sprite(this.config.initialPosition.width,this.config.initialPosition.height,"bird").setScale(4).setOrigin(0).setFlipX(!0),this.bird.setBodySize(this.bird.width,this.bird.height-8),this.bird.body.gravity.y=300,this.bird.setCollideWorldBounds(!0)}createBirdAnimation(){this.anims.create({key:"fly",frames:this.anims.generateFrameNumbers("bird",{start:8,end:15}),frameRate:8,repeat:-1}),this.bird.play("fly")}createWalls(){this.walls=this.physics.add.group();for(let e=0;e<2e3;e++){const e=this.walls.create(0,0,"wall").setImmovable(!0).setOrigin(0,1),t=this.walls.create(0,0,"wall").setImmovable(!0).setOrigin(0);this.placeWall(e,t)}this.walls.setVelocityX(-200)}handleInputs(){this.input.on("pointerdown",this.fly,this),this.input.keyboard.on("keydown-SPACE",this.fly,this)}createColliders(){this.physics.add.collider(this.bird,this.walls,this.restartGame,null,this)}createScore(){this.score=0,this.scoreText=this.add.text(8,8,"Score: "+this.score);const e=localStorage.bestScore?+localStorage.getItem("bestScore"):null;e&&this.add.text(8,24,"Best score: "+e)}createPause(){this.add.image(this.config.width-56,this.config.height-56,"pause").setScale(3).setOrigin(0).setInteractive().on("pointerdown",(()=>{this.physics.pause(),this.scene.pause(),this.scene.launch("PauseScene")}))}resumeListener(){this.pauseEvent||(this.pauseEvent=this.events.on("resume",(()=>{this.initialTime=3,this.countDownText=this.add.text(...a,"Resume in: "+this.initialTime,u).setOrigin(.5,1),this.timedEvent=this.time.addEvent({delay:1e3,callback:this.countDown,callbackScope:this,loop:!0})})))}countDown(){this.initialTime--,this.countDownText.setText("Resume in: "+this.initialTime).setOrigin(.5,1),this.initialTime<=0&&(this.countDownText.setText(""),this.physics.resume(),this.timedEvent.remove())}fly(){this.bird.body.velocity.y=-200}restartGame(){this.physics.pause(),this.bird.setTint(15616036),this.time.addEvent({delay:1e3,loop:!1,callback:()=>this.scene.restart()});const e=localStorage.bestScore?+localStorage.getItem("bestScore"):null;(!e||e<this.score)&&(localStorage.setItem("bestScore",this.score),this.add.text(8,24,"Best score: "+this.score))}getWallVerticalDistance(){return r.a.Math.Between(...l)}getWallVerticalPosition(e){return r.a.Math.Between(20,this.config.height-20-e)}getRightMostWall(){let e=0;return this.walls.getChildren().forEach((t=>e=Math.max(t.x,e))),e}placeWall(e,t){const s=this.getRightMostWall(),i=this.getWallVerticalDistance(),r=this.getWallVerticalPosition(i);e.x=s+this.wallHorizontalDistance,e.y=r,t.x=e.x,t.y=e.y+i}reuseWalls(){const e=[];this.walls.getChildren().forEach((t=>{t.getBounds().right<=0&&(e.push(t),2===e.length&&(this.placeWall(...e),this.updateScore()))}))}updateScore(){this.score++,this.scoreText.setText("Score: "+this.score)}},class extends g{constructor(e){super("BestScoreScene",e)}create(){super.create(),this.add.text(...a,"BEST SCORE: "+(localStorage.bestScore?localStorage.getItem("bestScore"):0),u).setOrigin(.5,1);const e=this.add.text(a[0],a[1]+70,"RETURN",p).setOrigin(.5,.5).setInteractive();super.textPointerOver(e,d),super.textPointerOut(e,p),super.backToMenu(e)}},class extends g{constructor(e){super("PauseScene",e)}create(){super.create(),super.createMenu(c,this.setupMenuEvents.bind(this))}setupMenuEvents(e){const t=e.textInteractive.setInteractive();super.textPointerOver(t,d),super.textPointerOut(t,u),t.on("pointerup",(()=>{"Resume"===e.text?this.scene.stop().resume(e.scene):this.scene.stop("GameScene").start("MenuScene")}))}}],m=e=>new e(n),b={type:r.a.AUTO,...n,pixelArt:!0,physics:{default:"arcade",arcade:{debug:!0}},scene:f.map(m)};new r.a.Game(b)}]);